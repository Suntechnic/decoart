{"version":3,"file":"script.js","sources":["../src/app-vue-components-form.js"],"sourcesContent":["import {Vue} from 'ui.vue';\n\nVue.component('app-vue-components-form', {\n\tdata()\n\t{\n\t\treturn {\n\t\t\tassets: {\n\t\t\t\timages: false,\n\t\t\t},\n\t\t\tstate: {\n\t\t\t\tsended: false,\n\t\t\t\tshowMessage: false\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\tphone: '',\n\t\t\t\tname: ''\n\t\t\t}\n\t\t}\n\t},\n\tcreated () {\n\t\tthis.assets.images = APP.config.assets.images;\n\t},\n\tmethods: {\n\t\tshowMessage(title,text) { return;\n\t\t\tlet src = this.assets.images+'/deco-part.png'\n\t\t\tlet popup = new BX.PopupWindow(\"app-vue-components-form-message\", null, {\n\t\t\t\t\tcontent: `<div class=\"form__thank\">\n\t\t\t\t\t\t\t\t\t<div class=\"form__thank-image\"><img src=\"`+src+`\" alt=\"\"></div>\n\t\t\t\t\t\t\t\t\t<div class=\"form__thank-info\">\n\t\t\t\t\t\t\t\t\t  <p class=\"large\">`+title+`</p>\n\t\t\t\t\t\t\t\t\t  <p>`+text+`</p>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t<div class=\"form__thank-close\"></div>\n\t\t\t\t\t\t\t\t</div>`,\n\t\t\t\t\tautoHide: true,\n\t\t\t\t\tcloseIcon: {right: \"70px\", top: \"90px\", opacity:0},\n\t\t\t\t\tcloseByEsc : true,\n\t\t\t\t\tzIndex: 0,\n\t\t\t\t\toffsetLeft: 0,\n\t\t\t\t\toffsetTop: 0,\n\t\t\t\t\tdraggable: {restrict: false},\n\t\t\t\t\toverlay: {backgroundColor: 'black', opacity: '80' },\n\t\t\t\t\tevents: {\n\t\t\t\t\t\t\tonPopupClose: function () {\n\t\t\t\t\t\t\t\tthis.destroy();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t});\n\t\t\tpopup.show();\n\t\t},\n\t\tsend() {\n\t\t\tlet self = this\n\t\t\tBX.ajax({   \n\t\t\t\t\turl: '/local/ajax.php',\n\t\t\t\t\tdata: this.data,\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdataType: 'json',\n\t\t\t\t\ttimeout: 30,\n\t\t\t\t\tasync: true,\n\t\t\t\t\tprocessData: true,\n\t\t\t\t\tscriptsRunFirst: true,\n\t\t\t\t\temulateOnload: true,\n\t\t\t\t\tstart: true,\n\t\t\t\t\tcache: false,\n\t\t\t\t\tonsuccess: function(data){\n\t\t\t\t\t\tconsole.log(data)\n\t\t\t\t\t\t\n\t\t\t\t\t\tif (data.status) {\n\t\t\t\t\t\t\tself.showMessage('Ошибка!','Попробуйте позже');\n                        } else {\n\t\t\t\t\t\t\tself.showMessage('Спасибо!','Наш менеджер свяжется с вами в ближайшее время');\n\t\t\t\t\t\t\tself.state.sended = true\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tonfailure: function(){\n\t\t\t\t\t\tself.showMessage('Ошибка!','Попробуйте позже');\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\n\t\t\tthis.data.phone='';\n\t\t\tthis.data.name='';\n\t\t}\n\t},\n\tcomputed: {\n\t\tvalid() {\n\t\t\treturn !!(this.data.phone.replace(/[^\\d]/g, '').length==11 && this.data.name);\n\t\t}\n\t},\n\twatch: {\n\t\t'data.phone' (val,oval) {\n\t\t\t\n\t\t\tif (val.length > oval.length) {\n\t\t\t\n\t\t\t\tlet phone = val.replace(/[^\\d]/g, '').substring(0,11);\n\t\t\t\tlet lenPhone = phone.length;\n\t\t\t\tlet tt = phone.split('');\n\t\t\t\t\n\t\t\t\tif (lenPhone > 1) tt.splice(1,\"\", \"(\");\n\t\t\t\tif (lenPhone > 3) tt.splice(5,\"\", \")\");\n\t\t\t\tif (lenPhone > 5) tt.splice(9,\"\", \"-\");\n\t\t\t\tif (lenPhone > 7) tt.splice(12,\"\", \"-\");\n\t\t\t\t\n\t\t\t\tlet phone_formated = '+'+tt.join('');\n\t\t\t\t\n\t\t\t\tif (val != phone_formated) {\n\t\t\t\t\tthis.data.phone = phone_formated;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t},template: `\n\t\t<section class=\"form\" v-bind:class=\"{action:state.showMessage}\">\n\t\t\t<a name=\"form\"></a>\n\t\t\t<div class=\"container\">\n\t\t\t\t<div class=\"form__grid\">\n\t\t\t\t  <div class=\"form__left\">\n\t\t\t\t\t<div class=\"form__title\">\n\t\t\t\t\t  <p class=\"large\">есть вопросы или задача?</p>\n\t\t\t\t\t  <h2>оставьте заявку</h2>\n\t\t\t\t\t  <p>мы перезвоним вам, чтобы проконсультировать или обсудить детали</p>\n\t\t\t\t\t</div>\n\t\t\t\t  </div>\n\t\t\t\t  <div class=\"form__right\">\n\t\t\t\t\t<div class=\"form__thank\">\n\t\t\t\t\t  <div class=\"form__thank-image\"><img v-if=\"assets.images\" v-bind:src=\"assets.images+'/deco-part.png'\" alt=\"\"></div>\n\t\t\t\t\t  <div class=\"form__thank-info\">\n\t\t\t\t\t\t<p class=\"large\">благодарим</p>\n\t\t\t\t\t\t<p>ваша заявка принята</p>\n\t\t\t\t\t  </div>\n\t\t\t\t\t  <div class=\"form__thank-close\"></div>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div class=\"form__container\">\n\t\t\t\t\t  <form action=\"#\"> \n\t\t\t\t\t\t<div class=\"input-container\">\n\t\t\t\t\t\t  <input type=\"text\"  v-model=\"data.name\" placeholder=\"Ваше имя\">\n\t\t\t\t\t\t  <div class=\"label\">Ваше имя</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div class=\"input-container\">\n\t\t\t\t\t\t  <input type=\"text\" v-model=\"data.phone\" placeholder=\"телефон\">\n\t\t\t\t\t\t  <div class=\"label\">телефон</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<button class=\"btn btn--border\" v-on:click.prevent=\"send\" v-bind:disabled=\"!valid\">жду звонка</button>\n\t\t\t\t\t\t<p>Нажимая кнопку Отправить, я даю <a href=\"/legal/\">согласие на Обработку персональных данных</a></p>\n\t\t\t\t\t  </form>\n\t\t\t\t\t</div>\n\t\t\t\t  </div>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div class=\"form__thank\">\n\t\t\t\t<div class=\"form__thank-image\"><img v-bind:src=\"assets.images+'/deco-part.png'\" alt=\"\"></div>\n\t\t\t\t<div class=\"form__thank-info\">\n\t\t\t\t  <p class=\"large\">Спасибо</p>\n\t\t\t\t  <p>Мы вам ответим в течение 15 мин</p>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"form__thank-close\" v-on:click=\"state.showMessage = false\"></div>\n\t\t\t</div>\n\t\t</section>\n\t`\n});\n"],"names":["Vue","component","data","assets","images","state","sended","showMessage","phone","name","created","APP","config","methods","title","text","src","popup","BX","PopupWindow","content","autoHide","closeIcon","right","top","opacity","closeByEsc","zIndex","offsetLeft","offsetTop","draggable","restrict","overlay","backgroundColor","events","onPopupClose","destroy","show","send","self","ajax","url","method","dataType","timeout","async","processData","scriptsRunFirst","emulateOnload","start","cache","onsuccess","console","log","status","onfailure","computed","valid","replace","length","watch","val","oval","substring","lenPhone","tt","split","splice","phone_formated","join","template"],"mappings":"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"}